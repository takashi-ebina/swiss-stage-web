---

description: "機能実装のためのタスクリストテンプレート"
---

# Tasks: [機能名（FEATURE NAME）]

**入力（Input）**: `/specs/[###-feature-name]/` にある設計ドキュメント
**前提条件（Prerequisites）**:

* plan.md（必須）
* spec.md（ユーザーストーリー用。必須）
* research.md
* data-model.md
* contracts/

**テスト（Tests）**:
以下の例にはテストタスクが含まれているが、テストは **任意（OPTIONAL）**。
→ 機能仕様で明確に要求された場合のみ含めること。

**整理方針（Organization）**:
タスクは **ユーザーストーリーごとにグループ化** される。
これにより各ストーリーを独立して実装・テストできる。

## フォーマット:

`[ID] [P?] [Story] 説明文`

* **[P]**: 並行実行可能（異なるファイルであり依存がないもの）
* **[Story]**: このタスクが属するユーザーストーリー（例：US1, US2, US3）
* 説明の中には **正確なファイルパスを必ず含める**

## パス規約（Path Conventions）

* **単一プロジェクト構成**
  `src/`, `tests/` はリポジトリ直下

* **Web アプリ**
  `backend/src/`, `frontend/src/`

* **モバイル**
  `api/src/`,
  `ios/src/` または `android/src/`

以下の例は単一プロジェクト構成を前提としている
→ 実際の構成は plan.md の内容に基づいて調整すること

<!-- 
  ============================================================================
  重要: 以下のタスクは説明のみを目的としたサンプルタスクです。
  
  /speckit.tasks コマンドは、以下に基づいてこれらを実際のタスクに置き換える必要があります。
  - spec.md からのユーザーストーリー (優先度 P1、P2、P3...)
  - plan.md からの機能要件
  - data-model.md からのエンティティ
  - contracts/ からのエンドポイント
  
  タスクはユーザー ストーリーごとに整理する必要があります。各ストーリーは次のようになります。
  - 独立して実装可能
  - 独立してテスト可能
  - MVPインクリメントとして提供可能
  
  これらのサンプル タスクを、生成された tasks.md ファイルに保存しないでください。
  ============================================================================
-->

## フェーズ 1: セットアップ（共有インフラ）

**目的**: プロジェクト初期化と基本構造の準備

* [ ] T001 実装計画に基づきプロジェクト構造を作成
* [ ] T002 [言語] プロジェクトを [フレームワーク] 依存関係付きで初期化
* [ ] T003 [P] Lint とフォーマットツールを設定


## フェーズ 2: 基盤（Blocking Prerequisites）

**目的**:
**いかなるユーザーストーリーよりも先に必ず完了しなければならない中核インフラ**

**⚠️ 極めて重要（CRITICAL）**：
このフェーズが完了するまで **ユーザーストーリーの作業は禁止**

以下は基盤タスクの例（プロジェクトに応じて調整）：

* [ ] T004 データベーススキーマおよびマイグレーションフレームワークのセットアップ
* [ ] T005 [P] 認証／認可フレームワークの実装
* [ ] T006 [P] API ルーティングおよびミドルウェア構造のセットアップ
* [ ] T007 すべてのストーリーが依存する基本モデル／エンティティの作成
* [ ] T008 エラーハンドリングおよびログ基盤の構築
* [ ] T009 環境設定管理のセットアップ

**チェックポイント**:
基盤準備完了 → ユーザーストーリーの実装を並行開始可能

## フェーズ 3: ユーザーストーリー 1 - [タイトル]（優先度: P1）🎯 MVP

**目的**:
このストーリーが何を提供するかの短い説明

**独立テスト**:
このストーリー単体で正しく動作することを確認する方法


### ユーザーストーリー 1 のテスト（任意。要求がある場合のみ）⚠️

> **【憲章原則II: TDD厳守】**
> テストは **最初に書くこと（MUST）**
> そして **実装前に FAIL（Red）することを確認する（MUST）**
> 実装後テストが通過（Green）したら、リファクタリングを実施

* [ ] T010 [P] [US1] コントラクトテスト
  `tests/contract/test_[name].py`
* [ ] T011 [P] [US1] 統合テスト
  `tests/integration/test_[name].py`

### ユーザーストーリー 1 の実装

* [ ] T012 [P] [US1] `src/domain/model/[entity1].java` に [Entity1] ドメインモデルを作成
* [ ] T013 [P] [US1] `src/domain/model/[entity2].java` に [Entity2] ドメインモデルを作成
* [ ] T014 [US1] `src/domain/service/[service].java` に [Service] ドメインサービスを実装（T012 / T013 に依存）
* [ ] T015 [US1] `src/application/[usecase].java` に [UseCase] アプリケーションサービスを実装
* [ ] T016 [US1] `src/infrastructure/repository/[repository].java` にリポジトリ実装を作成
* [ ] T017 [US1] `src/presentation/controller/[controller].java` にREST APIコントローラーを実装
* [ ] T015 [US1] `src/[location]/[file].py` に [エンドポイント/機能] を実装
* [ ] T016 [US1] バリデーションとエラーハンドリングを追加
* [ ] T017 [US1] ユーザーストーリー1用のログ追加

**チェックポイント**:
この時点でユーザーストーリー1は **単体で完全に動作しテスト可能** であること

## フェーズ 4: ユーザーストーリー 2 - [タイトル]（優先度: P2）

**目標（Goal）**:
このストーリーが提供する内容の簡潔な説明

**独立テスト（Independent Test）**:
このストーリー単体で正しく動作することをどのように確認するか


### ユーザーストーリー 2 のテスト

（**任意 – テストが要求された場合のみ**）⚠️

* [ ] T018 [P] [US2] `tests/contract/test_[name].py` にて [エンドポイント] のコントラクトテスト
* [ ] T019 [P] [US2] `tests/integration/test_[name].py` にて [ユーザージャーニー] の統合テスト

### ユーザーストーリー 2 の実装

* [ ] T020 [P] [US2] `src/models/[entity].py` に [Entity] モデルを作成
* [ ] T021 [US2] `src/services/[service].py` に [Service] を実装
* [ ] T022 [US2] `src/[location]/[file].py` に [エンドポイント / 機能] を実装
* [ ] T023 [US2] 必要であればユーザーストーリー 1 のコンポーネントと統合

**チェックポイント**:
この時点で、
ユーザーストーリー 1 **および** 2 の両方が
**それぞれ独立して動作している状態であること**


## フェーズ 5: ユーザーストーリー 3 - [タイトル]（優先度: P3）

**目標（Goal）**:
このストーリーが提供する内容の簡潔な説明

**独立テスト（Independent Test）**:
このストーリー単体で正しく動作することをどのように確認するか

### ユーザーストーリー 3 のテスト

（**任意 – テストが要求された場合のみ**）⚠️

* [ ] T024 [P] [US3] `tests/contract/test_[name].py` にて [エンドポイント] のコントラクトテスト
* [ ] T025 [P] [US3] `tests/integration/test_[name].py` にて [ユーザージャーニー] の統合テスト

### ユーザーストーリー 3 の実装

* [ ] T026 [P] [US3] `src/models/[entity].py` に [Entity] モデルを作成
* [ ] T027 [US3] `src/services/[service].py` に [Service] を実装
* [ ] T028 [US3] `src/[location]/[file].py` に [エンドポイント / 機能] を実装

**チェックポイント**:
この時点で、
**すべてのユーザーストーリーが独立して機能している状態になっていること**

[必要に応じて、この同じパターンに従い、さらにユーザーストーリーフェーズを追加すること]


## フェーズ N: 仕上げ & 横断的関心事（Polish & Cross-Cutting Concerns）

**目的（Purpose）**:
複数のユーザーストーリーに影響する改善を行う

* [ ] TXXX [P] `docs/` のドキュメント更新
* [ ] TXXX コードのクリーンアップおよびリファクタリング
* [ ] TXXX 全ストーリー横断のパフォーマンス最適化
* [ ] TXXX [P] 追加ユニットテスト（要求がある場合）`tests/unit/`
* [ ] TXXX セキュリティ強化
* [ ] TXXX `quickstart.md` の検証実行

## 依存関係 & 実行順序（Dependencies & Execution Order）

### フェーズ依存関係（Phase Dependencies）

* **セットアップ（フェーズ 1）**: 依存なし – すぐ開始可能
* **基盤（フェーズ 2）**: セットアップ完了に依存 – すべてのユーザーストーリーを **ブロック**
* **ユーザーストーリー（フェーズ 3 以降）**:
  すべて基盤フェーズ完了に依存

  * チーム体制があれば並行実行可能
  * もしくは優先度順に実行（P1 → P2 → P3）
* **Polish（最終フェーズ）**:
  すべての対象ユーザーストーリー完了に依存

### ユーザーストーリー依存関係

* **ユーザーストーリー 1（P1）**

  * フェーズ 2 完了後に開始可能
  * 他ストーリーへの依存なし

* **ユーザーストーリー 2（P2）**

  * フェーズ 2 完了後に開始可能
  * US1 と統合する場合がある
  * ただし **単体でテスト可能であること**

* **ユーザーストーリー 3（P3）**

  * フェーズ 2 完了後に開始可能
  * US1 / US2 と統合する場合がある
  * ただし **単体でテスト可能であること**

### 各ユーザーストーリー内部のルール

* テスト（含める場合）は **必ず実装前に書き、FAIL を確認**
* モデル → サービス → エンドポイントの順
* コア実装 → 統合の順
* そのストーリーが完了してから次の優先度へ

### 並行実行の機会（Parallel Opportunities）

* [P] の付いたセットアップタスクは並行可能
* フェーズ 2 の [P] 付きタスクも並行可能
* 基盤フェーズ完了後：

  * すべてのユーザーストーリーは並行開始可能（体制があれば）
* そのユーザーストーリー内のすべての [P] テストは並行可能
* 同一ストーリー内の [P] モデルも並行可能
* 異なるユーザーストーリーは、別メンバーにより並行作業可能

## 並列実行例：ユーザーストーリー 1

```bash
# ユーザーストーリー1のテストをまとめて起動（要求がある場合）:
Task: "tests/contract/test_[name].py における [endpoint] のコントラクトテスト"
Task: "tests/integration/test_[name].py における [user journey] の統合テスト"

# ユーザーストーリー1の全モデルをまとめて起動:
Task: "src/models/[entity1].py に [Entity1] モデルを作成"
Task: "src/models/[entity2].py に [Entity2] モデルを作成"
```

## 実装戦略（Implementation Strategy）

### MVP 優先（ユーザーストーリー 1 のみ）

1. フェーズ 1（セットアップ）完了
2. フェーズ 2（基盤）完了
   → **極めて重要：すべてのストーリーをブロックする**
3. フェーズ 3（ユーザーストーリー 1）完了
4. **停止して検証**：
   ユーザーストーリー 1 を単体でテスト
5. 準備が整えばデプロイ／デモ

### 段階的デリバリー（Incremental Delivery）

1. Setup + Foundational 完了 → 基盤準備完了
2. ユーザーストーリー 1 追加 → 単体テスト → デプロイ／デモ（MVP！）
3. ユーザーストーリー 2 追加 → 単体テスト → デプロイ／デモ
4. ユーザーストーリー 3 追加 → 単体テスト → デプロイ／デモ
5. 各ストーリーは前のストーリーを壊さず価値を追加

### 並行チーム戦略（Parallel Team Strategy）

複数開発者がいる場合：

1. チーム全員で Setup + Foundational を完了

2. 基盤完了後：

   * 開発者 A：ユーザーストーリー 1
   * 開発者 B：ユーザーストーリー 2
   * 開発者 C：ユーザーストーリー 3

3. 各ストーリーは独立して完成し統合


## 備考（Notes）

* [P] タスク = 別ファイルであり依存を持たない
* [Story] ラベルはタスクを特定のユーザーストーリーへ対応付けるためのもの
* 各ユーザーストーリーは **独立して完了・テスト可能であるべき**
* 実装前にテストが FAIL することを確認
* 各タスクまたは論理単位ごとにコミットすること
* 任意のチェックポイントで停止し、個別検証してよい
* 避けるべきこと：

  * 曖昧なタスク
  * 同一ファイルの競合
  * ストーリー間依存が原因で独立性が失われること
